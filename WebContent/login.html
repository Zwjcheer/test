<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title></title>
	<script type="text/javascript" src="./ajax.js"></script>
	</head>
	<body>
		<div id="" align="center"><img src="img/java.png" width="800" height="300"></div>
		<div id="" align="center" style="margin-top: 50px;" >
			
			账号:<input type="text" id="user"  name="username" value="" 
				onblur="if(this.value==''){this.value='请输入账号'}"
				onfocus="if(this.value=='请输入账号'){this.value=''}"
				/><div id="sp"></div><br />
			密码:<input type="password" name="password" id="ps" value=""
				onblur="if(this.value==''){this.value='请输入密码';this.type='text'}"
				onfocus="if(this.value=='请输入密码'){this.value='';this.type='password'}"
				/><br />
			<div style="margin-top: 20px;">
				<input type="button" value="登录" onclick="clk()" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
				<input type="button" value="注册" onclick="dianji()"/>
			</div>
		
		</div>
		
	</body>
	<script type="text/javascript">
		/* function dianji(){
			window.location.href="/StudentManger/first.html"
		} */
		  function clk(){
		    	//  alert("aa")
		       var username=document.getElementById("user");
		    	var password=document.getElementById("ps");
		      var value=username.value;
		      var values=password.value;
		     // alert(value)
		      //获取ajax对象
		      if(value!=null || value.equals("")){
		    	  //alert("sh")
		  		var ajax=getAjax();
		  		//监听状态改变事件
		  		ajax.onreadystatechange=function(){
		  			//alert(ajax.readyState) 
		  			if( ajax.status==200 && ajax.readyState==4){
		  				//请求成功并完成数据
		  				var result=ajax.responseText;
		  				//alert(result)
		  				var div=document.getElementById("sp");
		  				if("0"==result){
		  					div.innerHTML="<div style='color: red;'>用户名或密码错误，请重新输入</div>"
		  				}else{
		  					window.location.href="/StudentManagementSystem/admin_index.html"
		  				}
		  			}
		  		}
		  		
		      
		      //3 设置请求路径和方法
		      ajax.open("POST","/StudentManagementSystem/loginAjaxServlet",true)
		      //4 发起请求
		     // ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		      ajax.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		      ajax.send("username="+value+"&password="+values);
		      }
		     
		  }
		
		function dianji(){
			window.location.href="/StudentManagementSystem/register.html";
		}
		
		
	</script>
</html>
